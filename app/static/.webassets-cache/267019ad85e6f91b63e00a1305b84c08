Vvar exchange_data=0\u000avar currency_source='CNY'\u000avar currency_target='KRW'\u000avar exchange_url_front="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20(%22";var exchange_url_back="%22)&format=json&env=store://datatables.org/alltableswithkeys&callback=";$(document).ready(function(){function updateExchange(){var exchange_result=$('#sourceAmount').val()*parseFloat(exchange_data['query']['results']['rate']['Rate'])\u000a$('#targetAmount').val(exchange_result)\u000avar fee=$('#sourceAmount').val()*0.005\u000a$('#fee').text(fee)\u000aconsole.log(fee)\u000a$('#ask_rate').text(parseFloat(exchange_data['query']['results']['rate']['Bid']))\u000a$('#real_rate').text(parseFloat(exchange_data['query']['results']['rate']['Rate']))\u000a$('#saving').text(parseFloat(exchange_data['query']['results']['rate']['Rate'])*parseInt($('#sourceAmount').val()*(parseFloat(exchange_data['query']['results']['rate']['Rate'])-parseFloat(exchange_data['query']['results']['rate']['Bid']))-fee))}\u000afunction updateRate(){if(currency_source=='KRW'&&currency_target=='CNY'){$.ajax({type:"GET",url:exchange_url_front+'CNY'+'KRW'+exchange_url_back,success:function(data){exchange_data=data;console.log(exchange_data['query']['results']['rate']);exchange_data['query']['results']['rate']['Bid']=((1.0000/exchange_data['query']['results']['rate']['Ask'])*0.93).toFixed(7);exchange_data['query']['results']['rate']['Rate']=(1.0000/exchange_data['query']['results']['rate']['Rate']).toFixed(7);updateExchange();},failure:function(errMsg){alert("a");}});}\u000aelse{$.ajax({type:"GET",url:exchange_url_front+currency_source+currency_target+exchange_url_back,success:function(data){exchange_data=data\u000aexchange_data['query']['results']['rate']['Bid']=(0.93*exchange_data['query']['results']['rate']['Bid']).toFixed(7);console.log(currency_source+','+currency_target);console.log(data);updateExchange();},failure:function(errMsg){alert("a");}});}}\u000a$('#sourceAmount').keyup(function(){updateExchange();})\u000aupdateRate();$(document).on("click",'.CNY .select_currency',function(){console.log('select KRW');$(this).parent().addClass('KRW');$(this).parent().children('.flag').children('img')[0].src='../../static/img/flag_south_korea.jpg'\u000a$(this).parent().children('.country_label')[0].innerHTML="KRW"\u000a$(this).parent().removeClass('CNY');if($(this).parent().parent().hasClass('exchange_from_row')){currency_source='KRW'\u000aconsole.log('source krw');}\u000aelse{currency_target='KRW';console.log('target krw');}\u000aupdateRate();})\u000a$(document).on("click",'.KRW .select_currency',function(){$(this).parent().addClass('CNY');$(this).parent().children('.flag').children('img')[0].src='../../static/img/flag_china.png'\u000a$(this).parent().children('.country_label')[0].innerHTML="CNY"\u000a$(this).parent().removeClass('KRW');if($(this).parent().parent().hasClass('exchange_from_row')){currency_source='CNY';console.log('source cny');}\u000aelse{currency_target='CNY'\u000aconsole.log('target cny');}\u000aupdateRate();})\u000avar source_is_active=false;$(document).on("click",'.CNY',function()\u000a{console.log($(this))\u000aif(source_is_active==false){var currency_select='<div class="select_currency"><div class="flag"><img src="../../static/img/flag_south_korea.jpg"></div><div class="country_label">KRW</div</div>'\u000a$(this).append(currency_select);source_is_active=true;}\u000aelse{console.log('remove')\u000aexchange_data=$(this)\u000a$(this).children(".select_currency").remove();source_is_active=false;}});var target_is_active=false;$(document).on("click",'.KRW',function()\u000a{if(source_is_active==false){console.log('add');var currency_select='<div class="select_currency"><div class="flag"><img src="../../static/img/flag_china.png"></div><div class="country_label">CNY</div</div>'\u000a$(this).append(currency_select);source_is_active=true;}\u000aelse{console.log('remove')\u000aexchange_data=$(this)\u000a$(this).children(".select_currency").remove();source_is_active=false;}}); $(document).on("click",'.exchange_start_button',function()\u000a{var question2="<table class='question'><tbody><tr class='question_title'><td>\uc9c8\ubb38 \uc81c\ubaa9</td><td><input type='text'></td></tr><tr class='question_subtitle'><td>\ub3c4\uc6c0\ub9d0 \ud14d\uc2a4\ud2b8</td><td><input type='text'></td></tr><tr class='select'><td>\uc9c8\ubb38 \uc720\ud615</td><td><select><option value='choice'>\uac1d\uad00\uc2dd \uc9c8\ubb38</option><option value='multiple_choice'>\uac1d\uad00\uc2dd \uc9c8\ubb38(\uc911\ubcf5 \uc751\ub2f5)</option><option value='essay'>\uc8fc\uad00\uc2dd \uc9c8\ubb38</option></select></td></tr><tr class='option'><td></td><td><input placeholder='\uc635\uc158' type='text'></td></tr><tr><td></td><td><a class='option_addition'>\uc635\uc158\ucd94\uac00</a></td></tr><tr><td><input class='submit' type='button' value='\uc644\ub8cc''></td></tr></tbody></table>";var question="<div class='question'><div><span>\uc9c8\ubb38 \uc81c\ubaa9</span><input type ='text'></div><br><div><span>\ub3c4\uc6c0\ub9d0 \ud14d\uc2a4\ud2b8</span><textarea rows='1' col='10'></textarea></div><br><span>\uc9c8\ubb38 \uc720\ud615</span><select class='select'><option value='choice'>\uac1d\uad00\uc2dd \uc9c8\ubb38</option><option value='essay'>\uc8fc\uad00\uc2dd \uc9c8\ubb38</option><option value='multiple_choice'>\uac1d\uad00\uc2dd (\uc911\ubcf5\uc751\ub2f5)</option><option value='range'>\uc810\uc218 \ubc94\uc704 \uc120\ud0dd</option></select><div class='choice'><input type = 'text'placeholder='\uc635\uc158''><a><div class='option_addition'>\uc635\uc158\ucd94\uac00</div></a></div></div></div>";$("#ques").append(question2);});$('.survey_title_wrapper input').focus(function(){$(this).parent('div').css('border-left','solid 8px #FF3900');$(this).css('margin-left','18px');}).blur(function(){$(this).parent('div').css('border-left','none');$(this).css('margin-left','26px');});\u000a$(document).on("change",'select',function()\u000a{var valueSelected=$(this).val();if(valueSelected=="essay"){$(this).parents('tr').nextAll(".option").remove();$(this).parents('tr').next().remove();var essay="<tr class='essay'><td><input type='text' value='\ub2f5\ubcc0'></td></tr>";$(this).parents("tr").after(essay);}\u000aelse if(valueSelected=='choice'||valueSelected=='multiple_choice'){$(this).parents('tr').next(".essay").remove();$(this).parents('tr').nextAll(".option").remove();if($(this).parents('tr').next().find("input").length==0)\u000a$(this).parents('tr').next().remove();var choice="<tr class='option'><td></td><td><input placeholder='\uc635\uc158' type='text'></td></tr><tr>	<td></td><td><a class='option_addition'>\uc635\uc158\ucd94\uac00</a></td></tr>";$(this).parents("tr").after(choice);}}); $(document).on("click",'.option_addition',function(){var option="<tr class='option'><td></td><td><input placeholder='\uc635\uc158' type='text'></td></tr>";$(this).parents('tr').prev().after(option);});});
p1
.